/*
 * Pim de Waard
 * 5894778
 * Data processing
 */

// creates variable with datamap and searches for the matching "basis" id
var map = new Datamap({
  element: document.getElementById("basic"),
  projection: 'mercator',

// fills countries with color coding corresponding with population density data
// Countries where there is no data available get filled with autofill
  fills: {
          '>1000': "#49006a",
          '500-1000': "#7a0177",
          '250-500': "#ae017e",
          '125-250': "#dd3497",
          '60-125': "#f768a1",
          '30-60': "#fa9fb5",
          '15-30': "#fcc5c0",
          '7-15': "#fde0dd",
          '0-7': "#fff7f3",

         defaultFill: '#00ff00',
      },

// data per country created with changedata.py
  data: {
    'AFG': {fillKey: '30-60', density : '52' },
    'ALB': {fillKey: '60-125', density : '116' },
    'DZA': {fillKey: '7-15', density : '14' },
    'ASM': {fillKey: '250-500', density : '342' },
    'AND': {fillKey: '125-250', density : '180' },
    'AGO': {fillKey: '15-30', density : '15' },
    'ATG': {fillKey: '125-250', density : '200' },
    'ARG': {fillKey: '7-15', density : '14' },
    'ARM': {fillKey: '60-125', density : '108' },
    'ABW': {fillKey: '500-1000', density : '600' },
    'AUS': {fillKey: '0-7', density : '2' },
    'AUT': {fillKey: '60-125', density : '101' },
    'AZE': {fillKey: '60-125', density : '109' },
    'BHS': {fillKey: '30-60', density : '34' },
    'BHR': {fillKey: '>1000', density : '1660' },
    'BGD': {fillKey: '>1000', density : '1142' },
    'BRB': {fillKey: '500-1000', density : '637' },
    'BLR': {fillKey: '30-60', density : '46' },
    'BEL': {fillKey: '250-500', density : '359' },
    'BLZ': {fillKey: '15-30', density : '15' },
    'BEN': {fillKey: '60-125', density : '80' },
    'BMU': {fillKey: '>1000', density : '1292' },
    'BTN': {fillKey: '15-30', density : '18' },
    'BOL': {fillKey: '7-15', density : '9' },
    'BIH': {fillKey: '60-125', density : '73' },
    'BWA': {fillKey: '0-7', density : '3' },
    'BRA': {fillKey: '15-30', density : '23' },
    'BRN': {fillKey: '60-125', density : '75' },
    'BGR': {fillKey: '60-125', density : '69' },
    'BFA': {fillKey: '60-125', density : '60' },
    'BDI': {fillKey: '250-500', density : '326' },
    'KHM': {fillKey: '60-125', density : '80' },
    'CMR': {fillKey: '30-60', density : '41' },
    'CAN': {fillKey: '0-7', density : '3' },
    'CPV': {fillKey: '60-125', density : '123' },
    'CYM': {fillKey: '125-250', density : '234' },
    'CAF': {fillKey: '7-15', density : '7' },
    'TCD': {fillKey: '7-15', density : '8' },
    'CHI': {fillKey: '500-1000', density : '807' },
    'CHL': {fillKey: '15-30', density : '23' },
    'CHN': {fillKey: '125-250', density : '143' },
    'COL': {fillKey: '30-60', density : '41' },
    'COM': {fillKey: '250-500', density : '395' },
    'COD': {fillKey: '15-30', density : '29' },
    'COG': {fillKey: '7-15', density : '11' },
    'CRI': {fillKey: '60-125', density : '91' },
    'CIV': {fillKey: '60-125', density : '62' },
    'HRV': {fillKey: '60-125', density : '78' },
    'CUB': {fillKey: '60-125', density : '105' },
    'CUW': {fillKey: '250-500', density : '321' },
    'CYP': {fillKey: '60-125', density : '119' },
    'CZE': {fillKey: '125-250', density : '136' },
    'DNK': {fillKey: '125-250', density : '130' },
    'DJI': {fillKey: '30-60', density : '38' },
    'DMA': {fillKey: '60-125', density : '90' },
    'DOM': {fillKey: '125-250', density : '205' },
    'ECU': {fillKey: '30-60', density : '58' },
    'EGY': {fillKey: '60-125', density : '81' },
    'SLV': {fillKey: '250-500', density : '298' },
    'GNQ': {fillKey: '15-30', density : '24' },
    'ERI': {fillKey: '30-60', density : '52' },
    'EST': {fillKey: '30-60', density : '31' },
    'ETH': {fillKey: '60-125', density : '82' },
    'FRO': {fillKey: '30-60', density : '35' },
    'FJI': {fillKey: '30-60', density : '47' },
    'FIN': {fillKey: '15-30', density : '17' },
    'FRA': {fillKey: '60-125', density : '118' },
    'PYF': {fillKey: '60-125', density : '74' },
    'GAB': {fillKey: '0-7', density : '5' },
    'GMB': {fillKey: '125-250', density : '172' },
    'GEO': {fillKey: '60-125', density : '77' },
    'DEU': {fillKey: '125-250', density : '234' },
    'GHA': {fillKey: '60-125', density : '107' },
    'GIB': {fillKey: '>1000', density : '2924' },
    'GRC': {fillKey: '60-125', density : '87' },
    'GRL': {fillKey: '0-7', density : '0' },
    'GRD': {fillKey: '250-500', density : '305' },
    'GUM': {fillKey: '250-500', density : '331' },
    'GTM': {fillKey: '125-250', density : '134' },
    'GIN': {fillKey: '30-60', density : '40' },
    'GNB': {fillKey: '30-60', density : '53' },
    'GUY': {fillKey: '0-7', density : '3' },
    'HTI': {fillKey: '250-500', density : '362' },
    'HND': {fillKey: '60-125', density : '67' },
    'HKG': {fillKey: '>1000', density : '6783' },
    'HUN': {fillKey: '60-125', density : '110' },
    'ISL': {fillKey: '0-7', density : '3' },
    'IND': {fillKey: '250-500', density : '411' },
    'IDN': {fillKey: '125-250', density : '132' },
    'IRN': {fillKey: '30-60', density : '45' },
    'IRQ': {fillKey: '60-125', density : '73' },
    'IRL': {fillKey: '60-125', density : '64' },
    'IMN': {fillKey: '125-250', density : '145' },
    'ISR': {fillKey: '250-500', density : '352' },
    'ITA': {fillKey: '125-250', density : '205' },
    'JAM': {fillKey: '125-250', density : '249' },
    'JPN': {fillKey: '250-500', density : '349' },
    'JOR': {fillKey: '60-125', density : '68' },
    'KAZ': {fillKey: '0-7', density : '6' },
    'KEN': {fillKey: '60-125', density : '71' },
    'KIR': {fillKey: '60-125', density : '123' },
    'PRK': {fillKey: '125-250', density : '202' },
    'KOR': {fillKey: '500-1000', density : '503' },
    'KSV': {fillKey: '125-250', density : '166' },
    'KWT': {fillKey: '125-250', density : '153' },
    'KGZ': {fillKey: '15-30', density : '28' },
    'LAO': {fillKey: '15-30', density : '26' },
    'LVA': {fillKey: '30-60', density : '36' },
    'LBN': {fillKey: '250-500', density : '413' },
    'LSO': {fillKey: '60-125', density : '71' },
    'LBR': {fillKey: '30-60', density : '41' },
    'LBY': {fillKey: '0-7', density : '3' },
    'LIE': {fillKey: '125-250', density : '225' },
    'LTU': {fillKey: '30-60', density : '52' },
    'LUX': {fillKey: '125-250', density : '195' },
    'MAC': {fillKey: '>1000', density : '19428' },
    'MKD': {fillKey: '60-125', density : '81' },
    'MDG': {fillKey: '30-60', density : '35' },
    'MWI': {fillKey: '125-250', density : '158' },
    'MYS': {fillKey: '60-125', density : '86' },
    'MDV': {fillKey: '>1000', density : '1053' },
    'MLI': {fillKey: '7-15', density : '12' },
    'MLT': {fillKey: '>1000', density : '1300' },
    'MHL': {fillKey: '250-500', density : '300' },
    'MRT': {fillKey: '0-7', density : '3' },
    'MUS': {fillKey: '500-1000', density : '631' },
    'MYT': {fillKey: '500-1000', density : '551' },
    'MEX': {fillKey: '30-60', density : '58' },
    'FSM': {fillKey: '125-250', density : '158' },
    'MDA': {fillKey: '60-125', density : '123' },
    'MCO': {fillKey: '>1000', density : '17703' },
    'MNG': {fillKey: '0-7', density : '1' },
    'MNE': {fillKey: '30-60', density : '46' },
    'MAR': {fillKey: '60-125', density : '71' },
    'MOZ': {fillKey: '15-30', density : '29' },
    'MMR': {fillKey: '60-125', density : '73' },
    'NAM': {fillKey: '0-7', density : '2' },
    'NPL': {fillKey: '125-250', density : '208' },
    'NLD': {fillKey: '250-500', density : '492' },
    'NCL': {fillKey: '7-15', density : '13' },
    'NZL': {fillKey: '15-30', density : '16' },
    'NIC': {fillKey: '30-60', density : '48' },
    'NER': {fillKey: '7-15', density : '12' },
    'NGA': {fillKey: '125-250', density : '173' },
    'MNP': {fillKey: '125-250', density : '132' },
    'NOR': {fillKey: '15-30', density : '16' },
    'OMN': {fillKey: '7-15', density : '8' },
    'PAK': {fillKey: '125-250', density : '225' },
    'PLW': {fillKey: '30-60', density : '44' },
    'PAN': {fillKey: '30-60', density : '47' },
    'PNG': {fillKey: '15-30', density : '15' },
    'PRY': {fillKey: '15-30', density : '16' },
    'PER': {fillKey: '15-30', density : '22' },
    'PHL': {fillKey: '250-500', density : '312' },
    'POL': {fillKey: '125-250', density : '125' },
    'PRT': {fillKey: '60-125', density : '116' },
    'PRI': {fillKey: '250-500', density : '448' },
    'QAT': {fillKey: '125-250', density : '151' },
    'ROU': {fillKey: '60-125', density : '93' },
    'RUS': {fillKey: '7-15', density : '8' },
    'RWA': {fillKey: '250-500', density : '430' },
    'WSM': {fillKey: '60-125', density : '65' },
    'SMR': {fillKey: '500-1000', density : '525' },
    'STP': {fillKey: '125-250', density : '171' },
    'SAU': {fillKey: '7-15', density : '12' },
    'SEN': {fillKey: '60-125', density : '64' },
    'SRB': {fillKey: '60-125', density : '83' },
    'SYC': {fillKey: '125-250', density : '189' },
    'SLE': {fillKey: '60-125', density : '81' },
    'SGP': {fillKey: '>1000', density : '7252' },
    'SXM': {fillKey: '>1000', density : '1113' },
    'SVK': {fillKey: '60-125', density : '112' },
    'SVN': {fillKey: '60-125', density : '101' },
    'SLB': {fillKey: '15-30', density : '19' },
    'SOM': {fillKey: '7-15', density : '14' },
    'ZAF': {fillKey: '30-60', density : '41' },
    'ESP': {fillKey: '60-125', density : '92' },
    'LKA': {fillKey: '250-500', density : '332' },
    'KNA': {fillKey: '125-250', density : '200' },
    'LCA': {fillKey: '250-500', density : '285' },
    'MAF': {fillKey: '500-1000', density : '555' },
    'VCT': {fillKey: '250-500', density : '279' },
    'SDN': {fillKey: '15-30', density : '18' },
    'SUR': {fillKey: '0-7', density : '3' },
    'SWZ': {fillKey: '60-125', density : '61' },
    'SWE': {fillKey: '15-30', density : '22' },
    'CHE': {fillKey: '125-250', density : '195' },
    'SYR': {fillKey: '60-125', density : '111' },
    'TJK': {fillKey: '30-60', density : '49' },
    'TZA': {fillKey: '30-60', density : '50' },
    'THA': {fillKey: '125-250', density : '135' },
    'TLS': {fillKey: '60-125', density : '75' },
    'TGO': {fillKey: '60-125', density : '110' },
    'TON': {fillKey: '125-250', density : '144' },
    'TTO': {fillKey: '250-500', density : '261' },
    'TUN': {fillKey: '60-125', density : '67' },
    'TUR': {fillKey: '60-125', density : '94' },
    'TKM': {fillKey: '7-15', density : '10' },
    'TCA': {fillKey: '30-60', density : '40' },
    'TUV': {fillKey: '250-500', density : '327' },
    'UGA': {fillKey: '125-250', density : '167' },
    'UKR': {fillKey: '60-125', density : '79' },
    'ARE': {fillKey: '60-125', density : '89' },
    'GBR': {fillKey: '250-500', density : '257' },
    'USA': {fillKey: '30-60', density : '33' },
    'URY': {fillKey: '15-30', density : '19' },
    'UZB': {fillKey: '60-125', density : '66' },
    'VUT': {fillKey: '15-30', density : '19' },
    'VEN': {fillKey: '30-60', density : '32' },
    'VNM': {fillKey: '250-500', density : '280' },
    'VIR': {fillKey: '250-500', density : '314' },
    'PSE': {fillKey: '500-1000', density : '689' },
    'YEM': {fillKey: '30-60', density : '45' },
    'ZMB': {fillKey: '15-30', density : '17' },
    'ZWE': {fillKey: '30-60', density : '32' },
    },

// creates popup menu
  geographyConfig: {
            popupTemplate: function(geo, data) {
              // if there is no data for country where mouse is hovering over then this text is showed
              if (data == null){
                 return ['<div class="hoverinfo"><strong>',
                          'No data available for ' + geo.properties.name,
                          '</strong></div>'].join('');
                        }
              // if there is data for country where mouse is hovering over then this text is showed
              else {return ['<div class="hoverinfo"><strong>',
                        'People per square kilometer in ' + geo.properties.name,
                        ': ' + data.density,
                        '</strong></div>'].join('');
                    }
              }
        }

    });

// creates legend for colors and labels
map.legend();
